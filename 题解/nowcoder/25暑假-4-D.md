# 题解 ：D :  Determinant of 01-Matrix

题意 ： 给你一个数字 $N \leq 10^9$ ,请你构造一个只含有0和1的方形矩阵，使得这个矩阵的$det(A) = N$。

题解 : 

​	我们可以先考虑构造出$det(A)=2$的结构，显然可以得到：
$$
\begin{pmatrix}
1&1&0 \\
0&1&1 \\
1&0&1
\end{pmatrix}
$$
​	这个矩阵的行列式刚好是2.

​	根据行列式的性质我们可以知道:
$$
\begin{pmatrix}
A&0 \\
0&B 
\end{pmatrix}
$$
​	这个矩阵的行列式是A*B,也就是说，我们只需要找到一个方案可以使得对角线上的乘积刚好是$N$就可以了。

​	并且刚好由这个公式，我们可以推广，如果我们说这个det是2的矩阵叫$M_1$的话。

​	那么我们就可以构造出det为4的矩阵了：
$$
\begin{pmatrix}
2&0\\
0&2
\end{pmatrix}
\Rightarrow
\begin{pmatrix}
1&1&0&0&0&0 \\
0&1&1&0&0&0 \\
1&0&1&0&0&0 \\
0&0&0&1&1&0 \\
0&0&0&0&1&1 \\
0&0&0&1&0&1
\end{pmatrix}
$$
​	这样一来我们就解决了一半了，也就是说我们能构造我们已知的数的二倍的行列式的矩阵了

​	这里我们要思考，怎么样在$M_1$上操作后可以得到一个det是3的矩阵。

​	试一试就可以发现：
$$
\begin{pmatrix}
1&1&0&0\\
0&1&1&0 \\
1&0&1&1 \\
0&1&0&1
\end{pmatrix}
$$
​	这个矩阵的行列式是3，那么我们可以发现，这个结构就会让里面的结构+1.
$$
\begin{pmatrix}
1&1&0&0\\
0&x&x&x \\
1&x&x&x \\
0&x&x&x
\end{pmatrix}
$$
​	于是我们就可以开始思考一件事了，我们拥有了两个利器，一个是 *2 , 一个是 +1。

​	我们可以想到，这个就很类似于二进制了，或者也可以说是很像binpow（快速幂）的过程。

​	所以我们将题目中的$N$先转化成二进制的01串，如果结尾是一个1，那么我们就要构造一个 +1,

​	然后将这个位上的 $2^n$ 矩阵也通过 *2 乘到矩阵上就可以了。

​	这里给出可以通过的代码片段:

```cpp
/**/I(n);
  	if(n == 1){
  		puts("1");
  		return(puts("1"));
  	}
  	int k = 0;
  	for(int i = n; i; i >>= 1) k ++;
  	int size = 3 * std::__lg(n) + std::popcount((u32)n) - 1;
    using Mat = vector<vi>;
   	Mat A(size, vi(size, 0));

   	I i = 0, j = 0, cnt = size;
   	while(i < size && j < size) {
   		if(n & 1) {
   			A[i][j] = 1, A[i][j + 1] = 1;
   			A[size - 1 - (!(cnt & 1))][j] = 1;
   			i ++, j ++, cnt --;
   		}

 		  A[i][j] = 1;
      A[i][j + 1] = 1;
      A[i + 1][j + 1] = A[i + 1][j + 2] = 1;
      A[i + 2][j] = A[i + 2][j + 2] = 1;
      if (j + 3 < size) {
          A[i + 2][j + 3] = 1;
      }
      i+=3, j+=3;

   		n >>= 1, cnt -= 3;
   	}

   	cout << size << el;
   	for(auto &r : A)
   		F(i, 0, size)
   			cout << r[i] << " \n"[i == size - 1];

```

